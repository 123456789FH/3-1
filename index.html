<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ุชุทุจูู ุฃุณุฆูุฉ ุชูุงุนูู โ ุฑูุงุถูุงุช ุซุงูุซ ุงุจุชุฏุงุฆู</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{--brand:#ec4899;--brand-dark:#be185d}
    body{font-family:'Tajawal',system-ui,-apple-system,Segoe UI,Roboto,'Noto Sans Arabic',sans-serif;background:linear-gradient(180deg,#fff 0%,#fff5fb 60%,#ffe6f4 100%)}
    .card{backdrop-filter:blur(6px)}
    .choice{transition:transform .15s ease, box-shadow .15s ease}
    .choice:hover{transform:translateY(-2px)}
    .glow{box-shadow:0 0 0 3px rgb(236 72 153/.25)}
    .confetti{position:fixed;inset:0;pointer-events:none}
    .rtl-num{font-variant-numeric:tabular-nums}
  </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">
  <canvas id="confetti" class="confetti"></canvas>

  <main class="w-full max-w-3xl">
    <section class="card rounded-3xl shadow-2xl bg-white/90 border border-pink-100 p-5 sm:p-8">
      <header class="flex items-center justify-between gap-4">
        <div class="flex items-center gap-3">
          <div class="w-12 h-12 rounded-2xl bg-[var(--brand)] grid place-items-center text-white text-xl font-extrabold">ูฃ</div>
          <div>
            <h1 class="text-xl sm:text-2xl font-extrabold text-[var(--brand-dark)]">ุงุฎุชุจุงุฑ ุชูุงุนูู ููุชุน โ ุฑูุงุถูุงุช ุซุงูุซ</h1>
            <p class="text-sm text-gray-500">ุฃุณุฆูุฉ ุงุฎุชูุงุฑ ูู ูุชุนุฏุฏ ูุน ุชุดุฌูุน ููุฑู ููุฌูู ุชูุฏูู โญ</p>
          </div>
        </div>
        <button id="resetBtn" class="hidden sm:inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm">
          ุฅุนุงุฏุฉ ุงูุจุฏุงูุฉ โบ
        </button>
      </header>

      <div class="mt-6">
        <div class="w-full h-3 bg-gray-100 rounded-full overflow-hidden">
          <div id="bar" class="h-full bg-[var(--brand)] transition-all rtl-num" style="width:0%"></div>
        </div>
        <div class="mt-2 flex items-center justify-between text-sm text-gray-600">
          <span id="progressTxt">ุงูุณุคุงู 1 ูู <span id="totalQ">0</span></span>
          <span id="scoreTxt">ุงููุชูุฌุฉ: <b class="rtl-num" id="score">0</b></span>
        </div>
      </div>

      <article id="stage" class="mt-6"></article>

      <footer class="mt-8 flex flex-wrap gap-3 items-center justify-between">
        <div class="flex items-center gap-2 text-sm">
          <span class="inline-block w-2 h-2 rounded-full bg-[var(--brand)]"></span>
          <span class="text-gray-600">ูุตูุญุฉ: ุงุฎุชูุฑ ุงูุฅุฌุงุจุฉ ุซู ุงุถุบุท ยซุงูุชุงููยป.</span>
        </div>
        <div class="flex gap-2">
          <button id="prevBtn" class="px-4 py-2 rounded-xl bg-gray-100 text-gray-700 hover:bg-gray-200">ุงูุณุงุจู</button>
          <button id="nextBtn" class="px-4 py-2 rounded-xl bg-[var(--brand)] text-white hover:bg-[var(--brand-dark)]">ุงูุชุงูู</button>
        </div>
      </footer>
    </section>

    <section id="result" class="hidden mt-6 text-center">
      <div class="rounded-3xl bg-white/90 border border-pink-100 shadow-2xl p-8">
        <h2 class="text-2xl font-extrabold text-[var(--brand-dark)]">ุฃุญุณูุชู ูุง ุจุทูุฉ! ๐</h2>
        <p class="mt-2 text-gray-600">ุฃูููุชู ุงูุงุฎุชุจุงุฑ ุจูุชูุฌุฉ <b class="rtl-num" id="finalScore">0</b>/<span id="totalQ2">0</span>.</p>
        <p id="badge" class="mt-3 text-lg font-bold"></p>
        <div class="mt-5 flex flex-wrap justify-center gap-3">
          <button id="retryBtn" class="px-5 py-2 rounded-xl bg-gray-100 text-gray-700 hover:bg-gray-200">ุฅุนุงุฏุฉ ุงููุญุงููุฉ โบ</button>
          <button id="printBtn" class="px-5 py-2 rounded-xl bg-[var(--brand)] text-white hover:bg-[var(--brand-dark)]">ุทุจุงุนุฉ ุงูุดูุงุฏุฉ ๐</button>
        </div>
      </div>
    </section>
  </main>

  <!-- ุชุฐููู ุงูุญููู -->
  <div class="w-full text-center mt-6 text-xs text-gray-500">
    ุชุตููู ูุจุฑูุฌุฉ : <b>ุฃ/ ูุงุทูุฉ ูุฒุงุฒู</b>
  </div>

  <script>
  // โโโ ุจูุงูุงุช ุงูุฃุณุฆูุฉ โโโ
  const QUESTIONS = [
    {
      id:1,
      q:"ุฑููุถู ูุงุตุฑู ูค ุฏูุฑุงุช ูู ุงูููู ุงูุฃููุ ููฆ ูู ุงูุซุงููุ ููจ ูู ุงูุซุงูุซ. ุฅุฐุง ุงุณุชูุฑู ุนูู ูุฐุง ุงูููุทุ ููู ุฏูุฑุฉ ุณููุฑูุถ ูู ุงูููู ุงูุฎุงูุณุ",
      choices:["ูกูข","ูกู","ูกูค","ูกูฆ"],
      correct:0,
      hint:"ูุฒูุฏ ุจููุฏุงุฑ ูข ูู ูู ููู."
    },
    {
      id:2,
      q:"ุฑุณูุช ูุฏู ูกู ุฒูุฑุงุช ููู ุงูุฅุซูููุ ููกูฃ ููู ุงูุซูุงุซุงุกุ ููกูฆ ููู ุงูุฃุฑุจุนุงุก. ุฅุฐุง ุงุณุชูุฑุช ุนูู ูุฐุง ุงูููุทุ ููู ุฒูุฑุฉ ุณุชุฑุณู ููู ุงูุฎููุณุ",
      choices:["ูกูง","ูกูจ","ูกูฉ","ูขู"],
      correct:2,
      hint:"ูุฒูุฏ ุงูุนุฏุฏ ูฃ ูู ูู ููู."
    },
    {
      id:3,
      q:"ูุดู ุฃุญูุฏ ุฎุทูุชูู ุฅูู ุงูุฃูุงูุ ุซู ุงุชุฌู ูููููุง ููุดู ูค ุฎุทูุงุช. ูู ุฎุทูุฉ ูุญุชุงุฌูุง ููุนูุฏ ุฅูู ููุทุฉ ุงูุจุฏุงูุฉ ุฅุฐุง ุงุชุจุน ุงููุณุงุฑ ููุณู ุจุงูุนูุณุ",
      choices:["ูค","ูฆ","ูจ","ูข"],
      correct:1,
      hint:"ูุนูุณ ุงููุณุงุฑ: ูค ุฎุทูุงุช ูุณุงุฑูุง ุซู ุฎุทูุชุงู ููุฎูู."
    },
    {
      id:4,
      q:"ูุฑุฃุช ุฑูุงู ูุชุงุจูุง ูุฒูุฏ ูขูค ุตูุญุฉ ุนูู ุตูุญุงุช ูุชุงุจ ุฅููุงู. ุฅุฐุง ูุงู ูุชุงุจ ุฅููุงู ูุญูู ูกูข ุตูุญุฉุ ููู ุนุฏุฏ ุตูุญุงุช ูุชุงุจ ุฑูุงูุ",
      choices:["ูขูค","ูกูข","ูฃูฆ","ูฃู"],
      correct:2,
      hint:"ูกูข + ูขูค = ูฃูฆ ุตูุญุฉ."
    },
    {
      id:5,
      q:"ุฃูููู ุงูููุท: ูคูจุ ูฅูกุ ูฅูคุ โผ๏ธุ ูฆูุ ูฆูฃ",
      choices:["ูฅูง","ูฅูฆ","ูฅูฅ","ูฆูฆ"],
      correct:0,
      hint:"ูุฒูุฏ ุจููุฏุงุฑ ูฃ."
    },
    {
      id:6,
      q:"ุฃูููู ุงูููุท: ูจุ ูกูขุ โผ๏ธุ ูขูุ ูขูคุ ูขูจ",
      choices:["ูกูค","ูกูฆ","ูกูจ","ูกู"],
      correct:1,
      hint:"ูุฒูุฏ ุจููุฏุงุฑ ูค."
    }
  ];

  // โโโ ุนูุงุตุฑ โโโ
  const stage = document.getElementById('stage');
  const bar = document.getElementById('bar');
  const progressTxt = document.getElementById('progressTxt');
  const scoreTxt = document.getElementById('score');
  const nextBtn = document.getElementById('nextBtn');
  const prevBtn = document.getElementById('prevBtn');
  const resetBtn = document.getElementById('resetBtn');
  const result = document.getElementById('result');
  const totalQ = document.getElementById('totalQ');
  const totalQ2 = document.getElementById('totalQ2');
  const finalScore = document.getElementById('finalScore');
  const retryBtn = document.getElementById('retryBtn');
  const printBtn = document.getElementById('printBtn');

  totalQ.textContent = totalQ2.textContent = QUESTIONS.length;

  // โโโ ุญุงูุฉ ุงูุชุทุจูู โโโ
  let idx = 0;
  let score = 0;
  let answers = new Array(QUESTIONS.length).fill(null);

  // โโโ ุฑุณู ุณุคุงู โโโ
  function render(){
    const q = QUESTIONS[idx];
    progressTxt.innerHTML = `ุงูุณุคุงู ${idx+1} ูู <span>${QUESTIONS.length}</span>`;
    bar.style.width = ((idx)/ (QUESTIONS.length))*100 + '%';

    stage.innerHTML = `
      <div class="rounded-2xl border border-pink-100 bg-white p-5 sm:p-6">
        <div class="text-lg sm:text-xl font-bold text-gray-800">${q.q}</div>
        <div class="mt-4 grid sm:grid-cols-2 gap-3" id="choices"></div>
        <div class="mt-3 text-sm text-gray-500">ุชูููุญ: ${q.hint}</div>
      </div>`;

    const box = stage.querySelector('#choices');
    q.choices.forEach((c,i)=>{
      const btn = document.createElement('button');
      btn.className = 'choice w-full text-right px-4 py-3 rounded-xl border bg-white hover:bg-pink-50';
      btn.innerHTML = `<span class='rtl-num'>${String.fromCharCode(0x41 + i)})</span> ${c}`;
      if(answers[idx]!==null){
        btn.disabled = true;
        if(i===answers[idx]) btn.classList.add('glow');
      }
      btn.addEventListener('click',()=>select(i));
      box.appendChild(btn);
    });
    prevBtn.disabled = idx===0;
    nextBtn.textContent = (idx===QUESTIONS.length-1)? 'ุฅููุงุก' : 'ุงูุชุงูู';
  }

  // โโโ ุงุฎุชูุงุฑ ุฅุฌุงุจุฉ โโโ
  function select(i){
    if(answers[idx]!==null) return; // ููุน ุชุบููุฑ ุงูุฅุฌุงุจุฉ
    answers[idx]=i;
    const correct = QUESTIONS[idx].correct===i;
    if(correct){ score++; boom(); }
    scoreTxt.textContent = score;
    // ุชูููู ุงูุงุฎุชูุงุฑุงุช
    [...stage.querySelectorAll('.choice')].forEach((b,n)=>{
      b.disabled = true;
      if(n===QUESTIONS[idx].correct){ b.classList.add('bg-green-50','border-green-400'); }
      if(n===i && !correct){ b.classList.add('bg-red-50','border-red-300'); }
    });
  }

  // โโโ ุฃุฒุฑุงุฑ ุงูุชููู โโโ
  nextBtn.addEventListener('click',()=>{
    if(idx < QUESTIONS.length-1){ idx++; render(); }
    else { finish(); }
  });
  prevBtn.addEventListener('click',()=>{ if(idx>0){ idx--; render(); }});
  resetBtn.addEventListener('click',()=>{ reset(); render(); });
  retryBtn?.addEventListener('click',()=>{ reset(); result.classList.add('hidden'); document.querySelector('main>section').classList.remove('hidden'); render(); });

  function finish(){
    bar.style.width = '100%';
    finalScore.textContent = score;
    document.querySelector('main>section').classList.add('hidden');
    result.classList.remove('hidden');
    let badge = '';
    const p = (score/QUESTIONS.length)*100;
    if(p===100){ badge = 'ูุณุงู ุงูุฐูุจู โ ุฑุงุฆุนุฉ! ๐ฅ'; }
    else if(p>=80){ badge = 'ูุณุงู ุงููุถู โ ููุชุงุฒุฉ! ๐ฅ'; }
    else if(p>=50){ badge = 'ูุณุงู ุงูุจุฑููุฒู โ ุฃุญุณูุชู! ๐ฅ'; }
    else{ badge = 'ุงุณุชูุฑู ุจุงููุญุงููุฉุ ุฃูุชู ูุงุฏุฑุฉ ๐ช'; }
    document.getElementById('badge').textContent = badge;
    boom(100);
  }

  function reset(){ idx=0; score=0; answers.fill(null); scoreTxt.textContent=0; }

  // โโโ ูุคุซุฑุงุช: ูุตุงุตุงุช ูุฑููุฉ โโโ
  const cvs = document.getElementById('confetti');
  const ctx = cvs.getContext('2d');
  let confetti = [];
  function resize(){ cvs.width=innerWidth; cvs.height=innerHeight; }
  addEventListener('resize',resize); resize();
  function boom(count=40){
    for(let i=0;i<count;i++){
      confetti.push({x:Math.random()*cvs.width, y:-10, s: 4+Math.random()*6, v: 2+Math.random()*3, r: Math.random()*Math.PI});
    }
  }
  function tick(){
    ctx.clearRect(0,0,cvs.width,cvs.height);
    confetti.forEach(p=>{
      p.y+=p.v; p.r+=0.05; const w=p.s, h=p.s*0.6;
      ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.r);
      ctx.fillStyle = ['#ec4899','#f472b6','#fca5a5','#f59e0b','#10b981'][Math.floor(Math.random()*5)];
      ctx.fillRect(-w/2,-h/2,w,h); ctx.restore();
    });
    confetti = confetti.filter(p=>p.y<cvs.height+20);
    requestAnimationFrame(tick);
  } tick();

  // โโโ ุดูุงุฏุฉ ููุทุจุงุนุฉ โโโ
  printBtn?.addEventListener('click',()=>{
    const w = window.open('', 'cert');
    const html = `<!doctype html><html lang="ar" dir="rtl"><head>
      <meta charset="utf-8"><title>ุดูุงุฏุฉ ุฅูุฌุงุฒ</title>
      <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@700;800&display=swap" rel="stylesheet">
      <style>body{font-family:Tajawal,system-ui;background:#fff} .box{width:900px;margin:60px auto;padding:40px;border:6px solid #fbcfe8;border-radius:20px;text-align:center} h1{color:#be185d} .big{font-size:48px} .pink{color:#ec4899} .muted{color:#64748b}</style>
      </head><body>
        <div class="box">
          <div class="big">๐ ุดูุงุฏุฉ ุฅูุฌุงุฒ</div>
          <h1>ุฑูุงุถูุงุช ุซุงูุซ ุงุจุชุฏุงุฆู</h1>
          <p>ุชูุงูููุง! ููุฏ ุฃุชููุชู ุงูุงุฎุชุจุงุฑ ูุญููุชู ูุชูุฌุฉ <b class="pink">${score}/${QUESTIONS.length}</b>.</p>
          <p>ุงุณุชูุฑู ูู ุงูุชุฏุฑูุจุ ูุจุงูุชูููู ุฏุงุฆููุง ๐</p>
          <p class="muted" style="margin-top:20px">ุชุตููู ูุจุฑูุฌุฉ : ุฃ/ ูุงุทูุฉ ูุฒุงุฒู</p>
        </div>
      </body></html>`;
    w.document.write(html); w.document.close(); w.focus(); w.print();
  });

  // ุจุฏุก
  render();
  </script>
</body>
</html>
